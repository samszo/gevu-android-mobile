<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009" 
		xmlns:s="library://ns.adobe.com/flex/spark" 
		xmlns:view="views.*" xmlns:sqlite="com.peterelst.air.sqlite.*">
	
	<fx:Declarations>
		<sqlite:SQLite id="db" file="gevu_mobile.db"/>
		<sqlite:Query id="obj_int_query" connection="{db.connection}"
					  sql="SELECT ref,fonctions FROM gevu_objetsxinterieurs WHERE id_lieu={this.selected_id}" 
					  result="obj_int_resultHandler(event)"
					  error="query_errorHandler(event)"/>
	</fx:Declarations>
	
	<fx:Script>
		<![CDATA[
			import mx.core.FlexGlobals;
			[Bindable] private var selected_id:int;
			           private var cont:Array = new Array();
			
			public function set_selected_id(x:int):void
			{
				this.selected_id=x;
				cont= FlexGlobals.topLevelApplication.mytree.getLieuCtl(x,10,"/node");
				//this.cbType.dataProvider=cont;
			}
			
			protected function query_errorHandler(event:SQLErrorEvent):void
			{
			 	
			}
			
			
			protected function obj_int_resultHandler(event:SQLEvent):void
			{
				var o:Object=event;
			}
		]]>
	</fx:Script>
	<s:Panel x="0" y="0" width="926" height="686"  backgroundColor="black" title="Objet interieur">
		<s:VGroup width="378" height="243" gap="20" paddingBottom="13" paddingLeft="13"
				  paddingTop="13">
			<s:HGroup>
				<s:Label width="81" color="white" text="ref:" height="100%" verticalAlign="middle"/>
				<s:TextInput  id="F2" text="{}" width="165" />
			</s:HGroup>
			<s:HGroup>
				<s:Label width="82" color="white" text="fonctions:" height="100%" verticalAlign="middle"/>
				<s:TextInput id="F3" text="{}" width="50%" />
			</s:HGroup>
			<s:HGroup>
				<s:Label text="Type d'objet:" color="white"/>
				<s:ComboBox id="cbType" />				
			</s:HGroup>
			<s:HGroup>
				<s:Button id="saveModif" label="Enregistrer" />
				<s:Button id="ajoutDiag" label="Ajouter des diagnostics" />			
			</s:HGroup>
			
		</s:VGroup>
		
	</s:Panel>
</s:View>
